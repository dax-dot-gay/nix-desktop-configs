{
  "nix.enableLanguageServer": true,
  "nix.serverPath": "nixd",
  "nix.serverSettings": {
    "nixd": {
      "formatting": {
        "command": ["nixfmt", "--indent=4"]
      },
      "options": {
        "nixos": {
          "expr": "(builtins.getFlake \"${workspaceFolder}\").nixosConfigurations.testbed.options"
        },
        "nixos-home-manager": {
          "expr": "(builtins.getFlake \"${workspaceFolder}\").nixosConfigurations.testbed.options.home-manager.users.type.getSubOptions []"
        }
      }
    }
  }
}
